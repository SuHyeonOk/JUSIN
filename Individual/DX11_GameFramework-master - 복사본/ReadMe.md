# 엔진 작업

## 컨벤션

### 코드

#### 코딩 컨벤션

기존 수업 코드 스타일(헝가리안)

#### 아웃풋

함수의 결과가 "return"이 아니라 파라미터의 인자를 통해 전달 될 경우 헤더에 "OUT"을 붙일 것

```cpp
void Imgui_ObjectViewer(_uint iLevel, OUT CGameObject*& pSelectedObject);
void Imgui_ProtoViewer(OUT const _tchar*& szSelectedProto);
```
OUT은 "#define OUT " 으로 컴파일시 없어집니다. 단순히 이 파라미터로 값이 출력된다는 것을 나타내기 위한 용도

#### Utility 함수

유틸함수(static함수)들은 "~~~Utils" 클래스에 모아두기

- 게임 관련 유틸 : CGameUtils
- 수학 관련 유틸 : CMathUtils

위 함목에 포함되지 않으면 각자 새로 만들기

#### Imgui 관련 기능

Imgui관련 기능의 함수중 public함수는 항상 앞에 접두사로 "Imgui_"를 붙여줍시다.

### 주석

추가된 함수 및 클래스에 주석을 주석을 써야된다고 판단되면 헤더파일에 쓴다.
//,  /**/ 둘다 가능하지만 // 권장

특별한 규칙을 없지만 주석을 읽고, 어떤 input을 넣으면 어떤 output이 나온다 정도를 알 수 있을 정도로 씁니다.

### 브랜치 명

기능 추가의 경우 해당 기능을 설명하는 브랜치 명 앞에 "feature/" 를 붙인다.
- feature/BehaviorTree_Component
- feature/Refactoring_BT

버그 수정의 경우 해당 버그 내용을 설명하는 브랜치 명 앞에 "bugfix/"를 붙인다.
- bugfix/FSMComponent_Imgui_NotShowing

### 커밋 컨벤션

[참고블로그](https://velog.io/@shin6403/Git-git-%EC%BB%A4%EB%B0%8B-%EC%BB%A8%EB%B2%A4%EC%85%98-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0)

#### 요약

```
태그: 제목
본문
```
의 구성으로 작성

- 태그
  - Feat : 새로운 기능 추가
  - Fix : 버그 수정
  - Docs : 문서 수정
  - Style : 코드 포맷팅, 세미콜론 누락, 코드 변경이 없는 경우
  - Refactor : 코드 리펙토링
  - Chore : 빌드 업무 수정, 패키지 매니저 수정

- 제목
    - 제목은 최대 50글자가 넘지 않도록 하고 마침표 및 특수기호는 사용하지 않는다.
    - 영문으로 표기하는 경우 동사(원형)를 가장 앞에 두고 첫 글자는 대문자로 표기한다.(과거 시제를 사용하지 않는다.)
    - 제목은 개조식 구문으로 작성한다. --> 완전한 서술형 문장이 아니라, 간결하고 요점적인 서술을 의미.

- 본문
    - 본문은 한 줄 당 72자 내로 작성한다.
    - 본문 내용은 양에 구애받지 않고 최대한 상세히 작성한다.
    - 본문 내용은 어떻게 변경했는지 보다 무엇을 변경했는지 또는 왜 변경했는지를 설명한다.

```위 방법을 무조건 지키라는 의미가 아니고 위 방법대로 커밋메시지를 작성할 수 있게 커밋을 작업중에 한번씩 하도록 연습하자는 의미입니다.```

## 추가 기능

UI 툴
파티클, 쉐이더 툴
스켈레탈 애니메이션 툴(이벤트 삽입용)
배치 툴

파일입출력 쉽게 하는 함수
스테이트 머신
타이머 기능 강화(타이머 매니저)
사운드 매니저(2d, 3d)

각종 유틸성 함수 추가
구조 편리하게 변경(delete update에서 빼는 경우)(이건 자유)

## 툴 요구사항

클라이언트에서 레벨을 만드는 현 구조상 엔진에서 툴 레벨을 만드는건 구조상 비합리적으로 보임
툴 기능만 만들고 어떤 레벨에서 해당 툴을 쓸지를 client에서 선택하는 형식이 나아 보입니당

클라에서 레벨을 만들고 아래에 구현된 툴중 어떤 툴을 해당 레벨에서 나오게 할지 선택하고
추가적인 기능은 editor기능 활성화 버튼을 만들어 활성화 해야 나오게 구현(피킹 및 client게임 키입력과 겹칠 수 있는 행동)

### object viewer 탭
선택한 오브젝트의 내용을 object viewer탭에서 출력
항상 현재 layer와 각 layer에 있는 object이름 출력 및 여기서 선택하여 확인

피킹의 으로 고르는 기능은 에디터 옵션 키면 가동
에디터 옵션 키면 render만 실행되게 하기?

### level switcher
list box로 사용가능한 레벨 출력 및 클릭하여 해당 레벨로 이동
드롭다운으로 구현
client에서 level의 이름 입력받는다.

### clone 탭
object proto.에 있는 원형중 선택하여 현재 레벨에 생성
생성위치는 입력 또는 피킹으로 선택
layer선택 가능
파일로 저장된 args 선택가능

에디터 옵션 키면 드래그 드롭으로?


### UI위치 조절 탭
object viewer로 선택한 ui의 위치 또는 기타 정보를 조절하고 저장 가능(불러오기는 clone탭에서)
-> 이정도는 object viewer에 통합해도 되지 않을까?

### 파티클시스템 탭
파티클을 구성하는 요소는 따로 만들고 이 요소를 합치는 탭
각 파티클 요소 또한 편집가능하게(args파일 편집)
각 파티클 요소의 클론 기능(동시에 또는 어떤 시간 간격으로)
시간 천천히 또는 빠르게 기능
저장 기능 및 불러오기 기능

아래에 타임라인 에디터 추가 생성(animation event하듯이 하면 좋을듯)

* 쉐이더 툴의 경우 기능이 쉐이더 변수만 변경하고, hlsl파일 다시 컴파일하는 정도로 예상되고, 이정도는 objecer viewer에서 구현이 가능하므로 패스

### 스켈레탈 에니메이션 툴
대기...
아래에 타임라인 에디터 추가 생성

### curve 편집 툴
재호...

### 오브젝트 애니메이션 툴
TimelineController 컴포넌트를 가진 오브젝트에 한해서 동작하게 한다.
움직임(vector)의 경우 선형보간, 스플라인 선택가능하게
스칼라 값 변경의 경우 1차함수, 지수함수, 로그함수 선택

curve편집툴 있으면 이거도 사용하게 하면 좋을 듯

아래에 타임라인 에디터 추가 생성

## 논의 사항
args 를 파일로? 읽는건 언제? clone을 미리 해놓는다?
